üìù Task Description (English)

There is a simple cryptography library that contains certificates which can be used to sign arbitrary data and verify the resulting signature.

The library interfaces are defined as follows:

public interface IStore : IDisposable
{
    IEnumerable<ICertificate> Certificates { get; }
}

public interface ICertificate : IDisposable
{
    IEnumerable<ICertificateParam> CertificateParams { get; }

    byte[] Sign(byte[] data);

    bool Verify(byte[] signature);
}

public interface ICertificateParam
{
    bool Is(string value);
}

üìå Library Constraints

The library contains no more than 100 certificates.

Each certificate contains no more than 100 parameters.

Each parameter is globally unique:

if a certificate contains parameter X, no other certificate in the store contains this parameter.

‚ö† Enumeration Behavior

All enumerations are stable:

repeated enumeration returns the same objects in the same order.

However, enumerations are slow and unreliable:

enumerating certificates is approximately 20 times slower than enumerating parameters

enumeration may throw exceptions

üéØ Task

Implement a helper that, given a parameter value:

finds the corresponding certificate

signs data or verifies a signature using that certificate

üö¶ Requirements

Minimize the number of calls to the library.

Prefer enumerating certificate parameters over enumerating certificates.

Do not retrieve a certificate unless there is certainty that it has not already been discovered among previously enumerated ones.

The helper must be stable:

if the library throws an exception during enumeration, the exception must be propagated

on the next call, the helper must be able to resume searching, including certificates and parameters that were not yet enumerated

If no certificate with the specified parameter exists in the library, the helper must throw an Exception.

üîí Additional Constraints

Due to the instability of the library, multi-threaded code is not allowed.

The solution must be implemented in a single-threaded manner.

üí° What This Task Demonstrates

This task evaluates the ability to:

design efficient search logic

work with unreliable external APIs

optimize enumeration strategies

handle partial failures gracefully

write robust, defensive C# code

---

–û–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ —Ä—É—Å—Å–∫–æ–º:

–ï—Å—Ç—å –ø—Ä–æ—Å—Ç–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏–∏: –≤ –Ω–µ–π —Å–æ–¥–µ—Ä–∂–∞—Ç—Å—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã, –∫–æ—Ç–æ—Ä—ã–º–∏ –º–æ–∂–Ω–æ –ø–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å –ª—é–±—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –ø–æ–ª—É—á–∏–≤—à—É—é—Å—è –ø–æ–¥–ø–∏—Å—å.

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –≤—ã–≥–ª—è–¥—è—Ç —Ç–∞–∫

public interface IStore : IDisposable

{
    IEnumerable<ICertificate> Certificates { get; }
}
    
public interface ICertificate : IDisposable
{
    
    IEnumerable<ICertificateParam> CertificateParams { get; }
    
    byte[] Sign(byte[] data);
    
    bool Verify(byte[] signature);
    
}
    
public interface ICertificateParam
{
    
    bool Is(string value);
    
}
    
–í –±–∏–±–ª–∏–æ—Ç–µ–∫–µ –µ—Å—Ç—å –Ω–µ –±–æ–ª–µ–µ 100 —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤, —É –∫–∞–∂–¥–æ–≥–æ –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –µ—Å—Ç—å –Ω–µ –±–æ–ª–µ–µ 100 –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤. –ö–∞–∂–¥—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä ‚Äî —É–Ω–∏–∫–∞–ª–µ–Ω, —Ç.–µ. –µ—Å–ª–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä X, —Ç–æ –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –µ–≥–æ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç.

–í—Å–µ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è ‚Äî –ø–æ—Å—Ç–æ—è–Ω–Ω—ã (—Ç.–µ. –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ –≤–µ—Ä–Ω–µ—Ç —Ç–µ –∂–µ –æ–±—ä–µ–∫—Ç—ã –≤ —Ç–æ–º –∂–µ –ø–æ—Ä—è–¥–∫–µ), –æ–¥–Ω–∞–∫–æ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ –∏ –º–µ–¥–ª–µ–Ω–Ω–æ. –ü—Ä–∏—á–µ–º –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –ø—Ä–∏–º–µ—Ä–Ω–æ –≤ 20 —Ä–∞–∑ –º–µ–¥–ª–µ–Ω–Ω–µ–µ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.

–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞–ø–∏—Å–∞—Ç—å —Ö—ç–ª–ø–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –ø–æ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–º—É –ø–∞—Ä–∞–º–µ—Ç—Ä—É –±—É–¥–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏–ª–∏ –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–ø–∏—Å—å. –ü—Ä–∏ —ç—Ç–æ–º —Å—Ç–æ–∏—Ç –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —á–∏—Å–ª–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ, –æ—Ç–¥–∞–≤–∞—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—é –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (—Ç.–µ. –Ω–µ –ø–æ–ª—É—á–∞—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–µ—Ç —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏, —á—Ç–æ —Å—Ä–µ–¥–∏ —É–∂–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –Ω–µ—Ç –∏—Å–∫–æ–º–æ–≥–æ). –•—ç–ª–ø–µ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω—ã–º: –µ—Å–ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –≤—ã–¥–∞–ª–∞ –æ—à–∏–±–∫—É –ø—Ä–∏ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–∏, –æ–Ω –¥–æ–ª–∂–µ–Ω –µ–µ –ø—Ä–æ–∫–∏–Ω—É—Ç—å –≤—ã—à–µ, –∞ –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –≤—ã–∑–æ–≤–µ –±—ã—Ç—å –≥–æ—Ç–æ–≤—ã–º —Å–Ω–æ–≤–∞ –∏—Å–∫–∞—Ç—å, –≤ —Ç–æ–º —á–∏—Å–ª–µ –ø–æ –µ—â–µ –Ω–µ —Ä–∞—Å–∫—Ä—ã—Ç—ã–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º.

–ï—Å–ª–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ —Å –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º –Ω–µ—Ç –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ ‚Äî –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–±—Ä–æ—Å–∏—Ç—å Exception.

–¢–∞–∫–∂–µ –∏–∑-–∑–∞ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –Ω–µ –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–≥–æ –∫–æ–¥–∞.
